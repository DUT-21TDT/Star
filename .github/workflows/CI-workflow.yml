name: CI Phase

on:
  push:
    branches: ["*"]
  pull_request:
    branches: ["*"]

jobs:
  test-build:
    uses: DUT-21TDT/Star/.github/workflows/Confirm-workflow.yml@develop
    secrets: inherit
  
  dev-deploy:
    needs: test-build
    if: github.ref == 'refs/heads/develop'
    uses: DUT-21TDT/Star/.github/workflows/CI-workflows_dev.yml@develop

  prod-deploy:
    needs: test-build
    if: github.ref == 'refs/heads/main'
    uses: DUT-21TDT/Star/.github/workflows/CI-workflows_prod.yml@develop